<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <title>安全检查记录通知书预览</title>
    <link rel="stylesheet" href="../pdfjs/style.css" />
    <link rel="stylesheet" href="../pdfjs/pdfh5.css" />
    <link rel="stylesheet" href="../WEUI/css/weui.css"/>
    <style>
        .pdfjs {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #fff;
            position: relative;
        }
    </style>
</head>

<body>
<div class="pdfjs"></div>


<script src="../pdfjs/pdf.js" type="text/javascript" charset="utf-8"></script>
<script src="../pdfjs/pdf.worker.js" type="text/javascript" charset="utf-8"></script>
<script src="../pdfjs/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../pdfjs/pdfh5.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    function getParam(key){
        // 获取参数
        var url = window.location.search;
        // 正则筛选地址栏
        var reg = new RegExp("(^|&)"+ key +"=([^&]*)(&|$)");
        // 匹配目标参数
        var result = url.substr(1).match(reg);
        //返回参数值
        return result ? decodeURIComponent(result[2]) : null;
    }
    var url = getParam("url");
    var pdfh5 = new Pdfh5('.pdfjs', {
        pdfurl: "../"+url
    });
    //监听当前加载的pdf页数,currentPageDom当前加载的pdf的dom,currentNum当前加载的pdf页数,
    pdfh5.on("renderPages",function(currentPageDom){
        console.log(this.currentNum)
        console.log(pdfh5.currentNum)
    })


</script>
</body>

</html>
